<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Compile on Raspberry PI :: OpenCPN Developer Manual</title>
    <link rel="canonical" href="https://leamas.github.io/ocpn-manuals/ocpn-dev-manual/5.3.1/rpi2.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://leamas.github.io/ocpn-manuals">OpenCPN Developer Manual</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="ocpn-dev-manual" data-version="5.3.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">OpenCPN Developer Manual</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Developer Manual</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Developer Guide</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="prerequisites.html">Prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="compiling_linux.html">Compiling on Linux</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="building-on-armhf-linux-armbian-orange-pi.html">Building on armhf linux - Armbian - Orange Pi</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="building_on_motorola_xoom.html">Building on Motorola Xoom</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="compiling_on_slackware.html">Compile on Slackware</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="rpi2.html">Compile on Raspberry PI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="compiling_windows.html">Compiling on Windows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="compiling_mac_osx.html">Compiling on macOS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="modularized_packaging.html">Modularized Packaging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="code_formatting.html">Code Formatting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="messaging.html">Messaging</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text">Developer Plugins</span>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="bug_and_feature_tracking.html">Bugs and feature tracking</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="troubleshooting.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="pi_dependencies.html">PI Dependencies</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="pi_installer_summary.html">PI Manager Summary</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="pi_installler_dev_setup.html">PI Manager Dev Setup</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="pi_installer_catalog_meta.html">PI Manager Catalog &amp; Meta-Url</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="pi_installer_summary.html">PI Manager Dev Procedure</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ci-push-build-to-git.html">CI: Push build to Git Release</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ci-push-linux-build-to-launchpad.html">CI: Push Linux Build to Launchpad</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ci_travis_encryption_windows.html">CI: Travis Encryption for Windows Dev</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="advanceddebugtips.html">CI Advanced Debug Tips</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="codacy.html">Codacy:Automate code quality</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="testquality.html">TestQuality -Test Management</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="online_tools.html">Online Nmea Tools</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="user_interface_styling.html">User Interface Styling</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="updating_the_user_manual.html">Updating the User Manual</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="gallery_boats.html">Boat Gallery</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../shipdriver/0.0.1/shipdriver.html">Shipdriver manual DEMO</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">OpenCPN Developer Manual</span>
    <span class="version">5.3.1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="index.html">OpenCPN Developer Manual</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">5.3.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../plugin-installer/0.0.1/Home.html">Plugin Installer Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../plugin-installer/0.0.1/Home.html">0.0.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../shipdriver/0.0.1/shipdriver.html">ShipDriver OpenCPN plugin docs.</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../shipdriver/0.0.1/shipdriver.html">0.0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="developer_guide.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">OpenCPN Developer Manual</a></li>
    <li>Developer Manual</li>
    <li>Developer Guide</li>
    <li><a href="compiling_linux.html">Compiling on Linux</a></li>
    <li><a href="rpi2.html">Compile on Raspberry PI</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Compile on Raspberry PI</h1>
<div class="sect1">
<h2 id="_prerequisites"><a class="anchor" href="#_prerequisites"></a>Prerequisites:</h2>
<div class="sectionbody">
<div class="paragraph">
<p>HW setup: Make sure that you have:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A decent power supply. The Pi is power hungry and especially for
multi-core compilations and later on moving and zooming maps, you&#8217;ll
need full power. A 1.5 Amps mobile phone charger won&#8217;t do it, most of
the 2 Amps neither, especially in combination with ultra thin wired USB
signal cables! The Pi seems to create enormous current bursts, rather
than a continuous current flow. My Amp meter shows an average flow of
only 0.5A, but I know that the spikes will go up to 2-3 Amps! Zooming,
panning and heavy display activities cause these bursts, hence if your
Pi crashes during such actions, it&#8217;s most likely due to insufficient
power or too thin cables.</p>
</li>
<li>
<p>A quality Class 10 SD-Card. Most of instabilities or latencies come
from lousy SD-Cards or insufficient power supplies</p>
</li>
<li>
<p>Good Storage. You might wonder, where to put your chart files. Either,
buy a bigger SD card (32 Gb),or leave the SD card for Jessie and the app
and add a decent USB Memory stick. The Pi mounts memory sticks
automatically under /media/… The Pi is picky concerning mem sticks!</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_make_sure_you_are_on_the_latest_os_version"><a class="anchor" href="#_make_sure_you_are_on_the_latest_os_version"></a>Make sure, you are on the latest OS version</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre>$sudo apt-get update
$sudo apt-get dist-upgrade</pre>
</div>
</div>
<div class="paragraph">
<p>Use RASPI-CONFIG to enable OpenGL. Since the driver is still Beta, you
can&#8217;t do this from the GUI Desktop.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ sudo raspi-config</pre>
</div>
</div>
<div class="paragraph">
<p>⇒ Advanced Options, “GL Driver”, enable<br>
Add the following lines to /boot/config.txt</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$sudo vi /boot/config.txt
framebuffer_depth=32
framebuffer_ignore_alpha=1</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_the_sources_and_building_opencpn"><a class="anchor" href="#_getting_the_sources_and_building_opencpn"></a>Getting the sources and building OpenCPN:</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre>Simply follow the Linux build instructions for Ubuntu/Debian</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_random_notes"><a class="anchor" href="#_random_notes"></a>Random notes:</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Be aware that you also have to make provisions for the HW you want to
connect to the Pi, to give you GPS, AIS etc. and where and how you want
to connect these to the various interfaces and protocols:</p>
</div>
<div class="paragraph">
<p>In most cases you want</p>
</div>
<div class="literalblock">
<div class="content">
<pre>gpsd gpsd-clients</pre>
</div>
</div>
<div class="paragraph">
<p>There is an awful lot of things to consider when adding HW to the Pi,
which has nothing to do with compiling OpenCPN for Pis. OpenCPN is just
using&#8217;em. If that scares you away, consider to use OpenPlotter, which is
a pretty nice fully integrated HW &amp; SW solution for amazingly affordable
HW prices. May be bitTorrent wasn&#8217;t the luckiest choice as distribution
channel, but for those who are scared for security, you could buy their
prepopulated SD Card for small money.</p>
</div>
<div class="paragraph">
<p>The same applies for the question, how you want later to access the Pi
and OpenCPN, underway and away from your home router/LAN. Considering to
use the Pi as WiFi access point… Once configured as AP, you can&#8217;t use it
for accessing public WiFi nets in harbors!</p>
</div>
<div class="paragraph">
<p>When away from your internet@home your Pi won&#8217;t have any possibility to
fetch the current time, hence after power on, your date/time setting
will be ways off! You&#8217;ll need to read the date/time from an NMEA GPS
message and stitch it into the Pi&#8217;s clock. Afterwards, you&#8217;ll need the
NTP service from e.g. gpsd to keep it accurate. The NTP won&#8217;t do the
trick alone, because it will not touch your date/time setting, if they
are off for more than 1000 secs.</p>
</div>
<div class="paragraph">
<p>Last not least: If the a.m. process does not produce any obvious errors
or aborts and you end up with an executable, things should be pretty
much OK. Subsequent instabilities are most likely not caused from your
compilation or SW bugs all over the place. On a more or less clean
installation on an unspoilt RPI, everything should work fine. If not,
consider HW issues (as described above).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_additional_details"><a class="anchor" href="#_additional_details"></a>Additional Details</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I&#8217;m running the Pi headless; that&#8217;s because I probably have no issues w/
performance limitation from v-sync on TV screens. 60 fps looks very much
NTSC to me! Be sure that you are on a newer Jessie kernel, at least the
Dec. 2016 version. I am not so sure about having to switch ON OpenGL in
the OpenCPN config menu… I observed some instability on high detailed &amp;
quilted charts, when zooming. I switched OFF OpenGL in OpenCPN, but left
it ON in the Pi. The amazing result was, that the zoom and pan display
speed was equally fast as before, but the instability was gone. The
thing runs now since several days beton stable and I can do whatever I
want w/out being able to crash it ! This is due to a bug in OpenCPN.
Please refer to:</p>
</div>
<div class="paragraph">
<p><a href="http://www.cruisersforum.com/forums/f134/opencpn-on-raspberry-pi2-140940-18.html#post2322329" class="bare">http://www.cruisersforum.com/forums/f134/opencpn-on-raspberry-pi2-140940-18.html#post2322329</a></p>
</div>
<div class="paragraph">
<p>Why am I so picky about power bursts? Because in a normal computer, big
capacitors are added and power supplies are fast regulators to deal with
big power bursts. Mind you, the Intel 4 Core CPUs are rated up to 130W
at 1,1V, means 120Amps or so, while in idle mode, actual power
consumption is 30W or less. Hence the power consumption jumps between 30
and 130 Watts in milliseconds, as CPU power/load is required. We should
understand, that despite the small size of the Pi, the Quad-Core CPU in
there is a high performance beast of burden!! Due to the size of the Pi,
they had no chances putting big capacitors onto the board, and they
unloaded the burst problem to an external power supply, which is then by
many users replaced by a simple Mobile wall
<a href="http://www.cruisersforum.com/forums/tags/plug.html">plug</a>,
underestimating the untold power requirements of the Pi.</p>
</div>
<div class="paragraph">
<p>One more word concerning Power. I have seen specs for the Pi, saying it
should be supplied w/ 5.1V ! That&#8217;s essential, because the Pi has at the
entry a self healing poly-fuse and a diode to protect it against power
connections in the wrong sense (+/-). The
<a href="http://www.cruisersforum.com/forums/tags/price.html">price</a> to pay for is
that the self healing fuse has a significant internal resistance; That
means that right at the power entry to the Pi there is a loss of 100-200
mV, variable with the current intake. Just running it at a Mobile
<a href="http://www.cruisersforum.com/forums/tags/charger.html">charger</a>, which
are not so stable and go under heavy load even below 5V, the Pi is
starving for Power. For the full story and differences between Pi2/3,
please refer to the original page, which shows IMHO a bit an optimistic
view. Scroll down to the power section of the table and moreover to the
respective power chapter in the text. Notice the 2.5A under RPI3 and be
aware that the RPI 3 Documentation still lucks individual updates,
because the RPI3 is so much similar to the RPI2, except for power !</p>
</div>
<div class="paragraph">
<p><a href="http://elinux.org/RPi_Hardware" class="bare">http://elinux.org/RPi_Hardware</a></p>
</div>
<div class="paragraph">
<p>In the new PIXEL Desktop, there should be an indication of low power, ….
if the Pi still has got enough to switch it on….</p>
</div>
<div class="paragraph">
<p>Good luck hk</p>
</div>
<div class="paragraph">
<p>Raspberry Pi, Pi 2 and Pi 3 Benchmarks - Roy Longbottom&#8217;s PC benchmark
Collection
<a href="http://www.roylongbottom.org.uk/Raspberry%20Pi%20Benchmarks.htm" class="bare">http://www.roylongbottom.org.uk/Raspberry%20Pi%20Benchmarks.htm</a></p>
</div>
<div class="paragraph">
<p>PS: Feb 2017, OpenCPN V 4.5.2xx and Jessie Dec. 2016 Kernel on a
Raspberry Pi 3B</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
